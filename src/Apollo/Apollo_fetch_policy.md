# Fetch Policy

## 목차

1. [Fetch Policy](#1-fetch-policy)
    1. [cache-first (기본 값)](#1-1-cache-first-기본-값)
    2. [cache-and-network](#1-2-cache-and-network)
    3. [network-only](#1-3-network-only)
    4. [cache-only](#1-4-cache-only)
    5. [no-cache](#1-5-no-cache)

<br/>
<br/>

## 1. Fetch Policy

- Apollo Client에서 서버 데이터를 받아와 캐시에 저장해놓고 같은 쿼리를 요청 시, `저장된 데이터를 사용`하거나 `다시 서버에서 가져와 사용`할 수 있음
- 이러한 여러 방법 중 어떤 방법을 이용할 지 `fetchPolicy` 옵션을 이용해 설정할 수 있음

1. cache-first (기본 값)
2. cache-and-network
3. network-only
4. cache-only
5. no-cache

<br/>

### 1-1. cache-first (기본 값)

1. 쿼리를 이용해 요청을 보낼 때, 캐시를 확인
2. 캐시가 있으면 반환
3. 캐시가 없으면 서버에 쿼리로 데이터 요청
4. 응답 데이터를 캐시 데이터에 업데이트
5. 응답 데이터를 반환

- 주로 `데이터가 잘 바뀌지 않는 앱`에서 사용하는 것을 추천

<br/>

### 1-2. cache-and-network

1. 쿼리를 이용해 요청을 보낼 때, 캐시를 확인
2. 캐시가 있으면 반환
3. 캐시된 데이터가 있든 없든 무조건 서버에 쿼리로 데이터 요청
4. 응답 데이터를 캐시 데이터에 업데이트
5. 응답 데이터 반환

- 캐시의 유무에 상관없이 서버에 요청을 보내기에 캐시의 데이터를 먼저 빠르게 보여주고 이후, 새롭게 변경되어있을 수 있는 데이터를 교체하여 새롭게 보여줌
- `실시간 변경이 잦은 데이터`를 가져올 때 사용하는 것을 추천

<br/>

### 1-3. network-only

1. 서버에 쿼리로 요청 (캐시 확인 안 함)
2. 응답 데이터를 캐시 데이터에 업데이트
3. 응답 데이터 반환

- `캐시를 확인하지 않고` 무조건 서버에 요청을 보냄

<br/>

### 1-4. cache-only

1. 캐시 확인 (서버에 쿼리 요청 안 보냄)
2. 캐시 데이터가 있으면 이를 반환하고 없으면 에러 발생

<br/>

### 1-5. no-cache

1. 서버에 쿼리로 요청 (캐시 확인 안 함)
2. 응답 데이터 반환

- network-only와 비슷하나 no-cache는 `캐시 데이터를 업데이트 하지 않음`